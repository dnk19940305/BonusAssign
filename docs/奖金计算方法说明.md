# å¥–é‡‘è®¡ç®—æ–¹æ³•è¯´æ˜æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-11-07
- **æœ€åæ›´æ–°**: 2025-11-07
- **æ–‡æ¡£ç±»å‹**: ç³»ç»Ÿè®¾è®¡è¯´æ˜
- **ç³»ç»Ÿåç§°**: å¥–é‡‘åˆ†é…ç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•
1. [å¥–é‡‘è®¡ç®—æ¨¡å‹æ¦‚è¿°](#1-å¥–é‡‘è®¡ç®—æ¨¡å‹æ¦‚è¿°)
2. [ä¸‰ç»´å¥–é‡‘è®¡ç®—æ¨¡å‹](#2-ä¸‰ç»´å¥–é‡‘è®¡ç®—æ¨¡å‹)
3. [é¡¹ç›®å¥–é‡‘åˆ†é…æœºåˆ¶](#3-é¡¹ç›®å¥–é‡‘åˆ†é…æœºåˆ¶)
4. [å²—ä½åŸºå‡†å€¼ä½“ç³»](#4-å²—ä½åŸºå‡†å€¼ä½“ç³»)
5. [å¥–é‡‘è®¡ç®—æµç¨‹](#5-å¥–é‡‘è®¡ç®—æµç¨‹)
6. [æ•°æ®åº“è¡¨è®¾è®¡](#6-æ•°æ®åº“è¡¨è®¾è®¡)
7. [APIæ¥å£è®¾è®¡](#7-apiæ¥å£è®¾è®¡)
8. [å®é™…è®¡ç®—ç¤ºä¾‹](#8-å®é™…è®¡ç®—ç¤ºä¾‹)
9. [å¸¸è§é—®é¢˜è§£ç­”](#9-å¸¸è§é—®é¢˜è§£ç­”)

---

## 1. å¥–é‡‘è®¡ç®—æ¨¡å‹æ¦‚è¿°

### 1.1 è®¾è®¡ç†å¿µ
æœ¬ç³»ç»Ÿé‡‡ç”¨**"ä¸‰ç»´å¥–é‡‘æ¨¡å‹ + é¡¹ç›®å¥–é‡‘æœºåˆ¶"**çš„æ··åˆåˆ†é…ä½“ç³»ï¼Œç»“åˆå²—ä½åŸºå‡†å€¼å’Œä¸ªäººç»©æ•ˆï¼Œå®ç°å…¬å¹³ã€é€æ˜ã€æ¿€åŠ±æ€§çš„å¥–é‡‘åˆ†é…ã€‚

### 1.2 æ ¸å¿ƒç»„æˆ
```
æ€»å¥–é‡‘ = åŸºç¡€å¥–é‡‘ + é¡¹ç›®å¥–é‡‘
       = (åŸºç¡€å¥–é‡‘ Ã— å²—ä½åŸºå‡†å€¼ Ã— ä¸ªäººç»©æ•ˆç³»æ•° Ã— ä¸šåŠ¡çº¿ç³»æ•° Ã— åŸå¸‚ç³»æ•° Ã— æ—¶é—´ç³»æ•°) + é¡¹ç›®å¥–é‡‘
```
```
ä¸ªäººå¥–é‡‘ = å¥–é‡‘æ± / (ä¸‰ç»´è®¡ç®—å¾—åˆ† Ã— å²—ä½åŸºå‡†å€¼ Ã— ä¸ªäººç»©æ•ˆç³»æ•° Ã— ä¸šåŠ¡çº¿ç³»æ•° Ã— åŸå¸‚ç³»æ•° Ã— æ—¶é—´ç³»æ•°)
```
### 1.3 å…³é”®å‚æ•°
- **å²—ä½åŸºå‡†å€¼**: 0.1-3.0ï¼Œåæ˜ å²—ä½ä»·å€¼å’Œé‡è¦æ€§
- **ä¸ªäººç»©æ•ˆç³»æ•°**: 0.5-2.0ï¼ŒåŸºäºä¸‰ç»´è¯„åˆ†è®¡ç®—
- **ä¸šåŠ¡çº¿ç³»æ•°**: 0.8-1.5ï¼Œä¸åŒä¸šåŠ¡çº¿çš„å·®å¼‚è°ƒæ•´
- **åŸå¸‚ç³»æ•°**: 0.8-1.3ï¼Œåœ°åŒºç”Ÿæ´»æˆæœ¬å·®å¼‚è°ƒæ•´
- **æ—¶é—´ç³»æ•°**: 0.9-1.2ï¼Œå·¥ä½œæ—¶é—´å æ¯”è°ƒæ•´ (æ—¶é—´ç³»æ•°ä»ç»©æ•ˆå¯¼å…¥,ç„¶åè‡ªåŠ¨è®¡ç®—)

---

## 2. ä¸‰ç»´å¥–é‡‘è®¡ç®—æ¨¡å‹

### 2.1 æ¨¡å‹æ¶æ„
ä¸‰ç»´å¥–é‡‘æ¨¡å‹ä»ä¸‰ä¸ªç»´åº¦å…¨é¢è¯„ä¼°å‘˜å·¥è´¡çŒ®ï¼š

```
åˆ©æ¶¦è´¡çŒ®ç»´åº¦ (40%)
â”œâ”€ ç›´æ¥è´¡çŒ® (40%)
â”œâ”€ å·¥ä½œé‡è´¡çŒ® (30%)
â”œâ”€ è´¨é‡è´¡çŒ® (20%)
â””â”€ å²—ä½ä»·å€¼è´¡çŒ® (10%)

å²—ä½ä»·å€¼ç»´åº¦ (30%)
â”œâ”€ æŠ€èƒ½å¤æ‚åº¦ (30%)
â”œâ”€ è´£ä»»æƒé‡ (25%)
â”œâ”€ å†³ç­–å½±å“ (20%)
â”œâ”€ ç»éªŒè¦æ±‚ (15%)
â””â”€ å¸‚åœºä»·å€¼ (10%)

ç»©æ•ˆè¡¨ç°ç»´åº¦ (30%)
â”œâ”€ å·¥ä½œäº§å‡º (35%)
â”œâ”€ å·¥ä½œè´¨é‡ (30%)
â”œâ”€ å·¥ä½œæ•ˆç‡ (15%)
â”œâ”€ å›¢é˜Ÿåä½œ (10%)
â”œâ”€ åˆ›æ–°èƒ½åŠ› (5%)
â”œâ”€ é¢†å¯¼èƒ½åŠ› (3%)
â””â”€ å­¦ä¹ æˆé•¿ (2%)
```

### 2.2 å„ç»´åº¦è¯¦ç»†è¯´æ˜

#### 2.2.1 åˆ©æ¶¦è´¡çŒ®ç»´åº¦ (æƒé‡: 40%)
- **ç›´æ¥è´¡çŒ® (40%)**:
  - ç›´æ¥åˆ›é€ çš„ä¸šåŠ¡æ”¶å…¥
  - å®¢æˆ·è®¢å•è·å–
  - åˆåŒç­¾ç½²è´¡çŒ®
  - è®¡ç®—æ–¹å¼: ç›´æ¥æ”¶å…¥é‡‘é¢ Ã— è´¡çŒ®ç‡

- **å·¥ä½œé‡è´¡çŒ® (30%)**:
  - å®Œæˆå·¥ä½œé‡çš„é‡åŒ–è¯„ä¼°
  - å·¥æ—¶ç»Ÿè®¡
  - ä»»åŠ¡å®Œæˆæ•°é‡
  - è®¡ç®—æ–¹å¼: å®Œæˆå·¥æ—¶ Ã· æ ‡å‡†å·¥æ—¶ Ã— 100%

- **è´¨é‡è´¡çŒ® (20%)**:
  - å·¥ä½œæˆæœè´¨é‡è¯„ä»·
  - é”™è¯¯ç‡ã€è¿”å·¥ç‡
  - å®¢æˆ·æ»¡æ„åº¦
  - è®¡ç®—æ–¹å¼: 100% - é”™è¯¯ç‡ Ã— ç³»æ•°

- **å²—ä½ä»·å€¼è´¡çŒ® (10%)**:
  - å²—ä½å›ºæœ‰ä»·å€¼
  - ä¸å¯æ›¿ä»£æ€§
  - å…³é”®æŠ€èƒ½ç¨€ç¼ºæ€§
  - è®¡ç®—æ–¹å¼: å²—ä½ä»·å€¼è¯„åˆ† Ã— æƒé‡

#### 2.2.2 å²—ä½ä»·å€¼ç»´åº¦ (æƒé‡: 30%)
- **æŠ€èƒ½å¤æ‚åº¦ (30%)**:
  - æŠ€æœ¯éš¾åº¦è¯„ä¼°
  - æ‰€éœ€ä¸“ä¸šæŠ€èƒ½æ•°é‡
  - å­¦ä¹ æˆæœ¬è¯„ä¼°
  - è¯„åˆ†æ ‡å‡†: 1-10åˆ†

- **è´£ä»»æƒé‡ (25%)**:
  - æ‰¿æ‹…çš„è´£ä»»èŒƒå›´
  - å†³ç­–æƒé™çº§åˆ«
  - é£é™©æ‰¿æ‹…ç¨‹åº¦
  - è¯„åˆ†æ ‡å‡†: 1-10åˆ†

- **å†³ç­–å½±å“ (20%)**:
  - å¯¹ç»„ç»‡çš„å½±å“èŒƒå›´
  - å†³ç­–ä¼ æ’­æ·±åº¦
  - æˆ˜ç•¥é‡è¦æ€§
  - è¯„åˆ†æ ‡å‡†: 1-10åˆ†

- **ç»éªŒè¦æ±‚ (15%)**:
  - å·¥ä½œç»éªŒè¦æ±‚
  - è¡Œä¸šç»éªŒè¦æ±‚
  - ç‰¹å®šé¢†åŸŸç»éªŒ
  - è¯„åˆ†æ ‡å‡†: 1-10åˆ†

- **å¸‚åœºä»·å€¼ (10%)**:
  - å¤–éƒ¨å¸‚åœºè–ªèµ„æ°´å¹³
  - äººæ‰ç¨€ç¼ºç¨‹åº¦
  - è¡Œä¸šç«äº‰åŠ›
  - è¯„åˆ†æ ‡å‡†: 1-10åˆ†

#### 2.2.3 ç»©æ•ˆè¡¨ç°ç»´åº¦ (æƒé‡: 30%)
- **å·¥ä½œäº§å‡º (35%)**:
  - å®Œæˆå·¥ä½œé‡
  - äº¤ä»˜æˆæœæ•°é‡
  - ç›®æ ‡è¾¾æˆç‡
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **å·¥ä½œè´¨é‡ (30%)**:
  - æˆæœè´¨é‡è¯„çº§
  - é”™è¯¯ç‡ç»Ÿè®¡
  - å®¢æˆ·åé¦ˆè¯„åˆ†
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **å·¥ä½œæ•ˆç‡ (15%)**:
  - ä»»åŠ¡å®Œæˆé€Ÿåº¦
  - æ—¶é—´ç®¡ç†èƒ½åŠ›
  - èµ„æºåˆ©ç”¨æ•ˆç‡
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **å›¢é˜Ÿåä½œ (10%)**:
  - è·¨éƒ¨é—¨åˆä½œ
  - çŸ¥è¯†åˆ†äº«è´¡çŒ®
  - å›¢é˜Ÿæ°›å›´è´¡çŒ®
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **åˆ›æ–°èƒ½åŠ› (5%)**:
  - åˆ›æ–°æ–¹æ¡ˆæå‡º
  - æµç¨‹ä¼˜åŒ–å»ºè®®
  - æŠ€æœ¯åˆ›æ–°åº”ç”¨
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **é¢†å¯¼èƒ½åŠ› (3%)**:
  - é¡¹ç›®é¢†å¯¼è¡¨ç°
  - å›¢é˜ŸæŒ‡å¯¼èƒ½åŠ›
  - å½±å“åŠ›å»ºè®¾
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

- **å­¦ä¹ æˆé•¿ (2%)**:
  - æŠ€èƒ½æå‡é€Ÿåº¦
  - åŸ¹è®­å‚ä¸åº¦
  - çŸ¥è¯†æ›´æ–°é¢‘ç‡
  - è¯„åˆ†æ ‡å‡†: 0-100åˆ†

### 2.3 ç»´åº¦å¾—åˆ†è®¡ç®—å…¬å¼

#### 2.3.1 ç»¼åˆç»´åº¦å¾—åˆ†
```
ç»´åº¦å¾—åˆ† = Î£(å­é¡¹ç›®å¾—åˆ† Ã— å­é¡¹ç›®æƒé‡) Ã— ç»´åº¦æƒé‡
```

#### 2.3.2 ä¸‰ç»´ç»¼åˆå¾—åˆ†
```
ä¸‰ç»´ç»¼åˆå¾—åˆ† = (åˆ©æ¶¦è´¡çŒ®å¾—åˆ† Ã— 40%) + (å²—ä½ä»·å€¼å¾—åˆ† Ã— 30%) + (ç»©æ•ˆè¡¨ç°å¾—åˆ† Ã— 30%)
```

#### 2.3.3 ä¸ªäººç»©æ•ˆç³»æ•°è½¬æ¢
```
ä¸ªäººç»©æ•ˆç³»æ•° = ä¸‰ç»´ç»¼åˆå¾—åˆ† Ã· 100
èŒƒå›´: 0.5 - 2.0
```

### 2.4 å¾—åˆ†æ ‡å‡†åŒ–

#### 2.4.1 ç™¾åˆ†ä½æ’å
```javascript
// è®¡ç®—ç™¾åˆ†ä½æ’å
percentile = (rank - 1) Ã· (total_count - 1) Ã— 100

// ç¤ºä¾‹: æ€»äººæ•°100ï¼Œæ’å12
percentile = (12 - 1) Ã· (100 - 1) Ã— 100 = 11.11%
```

#### 2.4.2 åˆ†å±‚åˆ†é…
```
ä¼˜ç§€å±‚ (90åˆ†ä»¥ä¸Š): æœ€é«˜çº§åˆ«å¥–é‡‘
è‰¯å¥½å±‚ (80-89åˆ†): æ ‡å‡†å¥–é‡‘
åˆæ ¼å±‚ (70-79åˆ†): åŸºç¡€å¥–é‡‘
å¾…æ”¹è¿›å±‚ (60-69åˆ†): ä¿åº•å¥–é‡‘
```

---

## 3. é¡¹ç›®å¥–é‡‘åˆ†é…æœºåˆ¶

### 3.1 é¡¹ç›®å¥–é‡‘æ± ç®¡ç†

#### 3.1.1 å¥–é‡‘æ± åˆ›å»º
- **é¢„ç®—ä¾æ®**: åŸºäºé¡¹ç›®æ€»é¢„ç®—çš„5-15%
- **é‡è¦æ€§ç³»æ•°**: æ ¹æ®é¡¹ç›®æˆ˜ç•¥é‡è¦æ€§è°ƒæ•´ (0.5-2.0)
- **éš¾åº¦ç³»æ•°**: æ ¹æ®é¡¹ç›®æŠ€æœ¯éš¾åº¦è°ƒæ•´ (0.8-1.5)
- **å›¢é˜Ÿè§„æ¨¡**: æ ¹æ®å‚ä¸äººæ•°è°ƒæ•´

```
é¡¹ç›®å¥–é‡‘æ±  = é¡¹ç›®é¢„ç®— Ã— 5% Ã— é‡è¦æ€§ç³»æ•° Ã— éš¾åº¦ç³»æ•° Ã— å›¢é˜Ÿè§„æ¨¡ç³»æ•°
```

#### 3.1.2 å¥–é‡‘æ± åˆ†é…çŸ©é˜µ
| é¡¹ç›®ä¼˜å…ˆçº§ | å›¢é˜Ÿäººæ•° | å¥–é‡‘æ± æ¯”ä¾‹ | æœ€ä½å¥–é‡‘æ±  | æœ€é«˜å¥–é‡‘æ±  |
|-----------|---------|-----------|-----------|-----------|
| æ ¸å¿ƒé¡¹ç›® | 3-5äºº | 12-15% | Â¥50,000 | Â¥200,000 |
| æ ¸å¿ƒé¡¹ç›® | 6-10äºº | 10-12% | Â¥80,000 | Â¥300,000 |
| é‡è¦é¡¹ç›® | 3-5äºº | 8-10% | Â¥30,000 | Â¥120,000 |
| é‡è¦é¡¹ç›® | 6-10äºº | 6-8% | Â¥50,000 | Â¥180,000 |
| ä¸€èˆ¬é¡¹ç›® | 3-5äºº | 5-6% | Â¥15,000 | Â¥60,000 |
| ä¸€èˆ¬é¡¹ç›® | 6-10äºº | 4-5% | Â¥20,000 | Â¥80,000 |

### 3.2 é¡¹ç›®è§’è‰²ä½“ç³»

#### 3.2.1 è§’è‰²å®šä¹‰åŠæƒé‡
| è§’è‰²åç§° | åŸºç¡€æƒé‡èŒƒå›´ | èŒè´£æè¿° | å…¸å‹å²—ä½ |
|---------|-------------|---------|---------|
| é¡¹ç›®ç»ç† | 1.2-1.5 | é¡¹ç›®æ•´ä½“åè°ƒï¼Œè¿›åº¦ç®¡ç†ï¼Œé£é™©æ§åˆ¶ | é¡¹ç›®ç»ç† |
| æŠ€æœ¯è´Ÿè´£äºº | 1.1-1.3 | æŠ€æœ¯æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒæ¨¡å—å¼€å‘ï¼ŒæŠ€æœ¯æ”»å…³ | é«˜çº§å·¥ç¨‹å¸ˆ |
| é«˜çº§å¼€å‘ | 0.9-1.1 | æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼Œä»£ç å®¡æŸ¥ï¼ŒæŠ€æœ¯æ”¯æŒ | é«˜çº§å·¥ç¨‹å¸ˆ |
| æ™®é€šå¼€å‘ | 0.7-0.9 | åŸºç¡€åŠŸèƒ½å¼€å‘ï¼Œå•å…ƒæµ‹è¯•ï¼Œæ–‡æ¡£ç¼–å†™ | ä¸­çº§/åˆçº§å·¥ç¨‹å¸ˆ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | 0.8-1.0 | æµ‹è¯•ç”¨ä¾‹è®¾è®¡ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè´¨é‡ä¿éšœ | QAå·¥ç¨‹å¸ˆ |
| éœ€æ±‚åˆ†æå¸ˆ | 0.9-1.1 | éœ€æ±‚åˆ†æï¼Œæ–¹æ¡ˆè®¾è®¡ï¼Œå®¢æˆ·æ²Ÿé€š | éœ€æ±‚åˆ†æå¸ˆ/äº§å“ç»ç† |

#### 3.2.2 æƒé‡è®¡ç®—å…¬å¼
```
ä¸ªäººé¡¹ç›®å¥–é‡‘ = é¡¹ç›®å¥–é‡‘æ±  Ã— (ä¸ªäººæƒé‡ Ã— å‚ä¸åº¦) Ã· Î£(æ‰€æœ‰æˆå‘˜æƒé‡ Ã— å‚ä¸åº¦)

å…¶ä¸­:
ä¸ªäººæƒé‡ = è§’è‰²åŸºç¡€æƒé‡ Ã— ä¸ªäººèƒ½åŠ›ç³»æ•° Ã— è´¡çŒ®æ¯”ä¾‹
å‚ä¸åº¦ = å®é™…å‚ä¸æ—¶é—´ Ã· é¡¹ç›®æ€»æ—¶é—´ (0.3-1.0)
```
```
ä¸ªäººæƒé‡ = è§’è‰²åŸºç¡€æƒé‡ Ã— ä¸ªäººèƒ½åŠ›ç³»æ•° Ã— è´¡çŒ®æƒé‡ Ã— å·¥ä½œé‡å æ¯” Ã— å‚ä¸åº¦
å‚ä¸åº¦èŒƒå›´ï¼š1-100%
å·¥ä½œé‡å æ¯”ï¼š1-100%ï¼ˆè¡¨ç¤ºåœ¨è¯¥é¡¹ç›®ä¸­æŠ•å…¥çš„æ—¶é—´æ¯”ä¾‹ï¼‰
```
### 3.3 é¡¹ç›®å¥–é‡‘è®¡ç®—æµç¨‹

```mermaid
graph TD
    A[é¡¹ç›®å®Œæˆ] --> B[è®¡ç®—é¡¹ç›®å¥–é‡‘æ± ]
    B --> C[è¯„ä¼°å›¢é˜Ÿæˆå‘˜è´¡çŒ®]
    C --> D[ç¡®å®šä¸ªäººæƒé‡]
    D --> E[è®¡ç®—å‚ä¸åº¦]
    E --> F[è®¡ç®—ä¸ªäººå¥–é‡‘]
    F --> G[æ±‡æ€»é¡¹ç›®å¥–é‡‘]
    G --> H[åŠ å…¥æ€»å¥–é‡‘]
```

---

## 4. å²—ä½åŸºå‡†å€¼ä½“ç³»

### 4.1 åŸºå‡†å€¼å®šä¹‰
å²—ä½åŸºå‡†å€¼æ˜¯ä¸€ä¸ª0.1-3.0ä¹‹é—´çš„æ•°å€¼ï¼Œç”¨äºè¡¡é‡å²—ä½çš„ç›¸å¯¹ä»·å€¼å’Œé‡è¦æ€§ï¼Œç›´æ¥å½±å“å¥–é‡‘å€æ•°ã€‚

### 4.2 åŸºå‡†å€¼åˆ†çº§

#### 4.2.1 é«˜ä»·å€¼å²—ä½ (1.8-3.0)
- **é€‚ç”¨å²—ä½**: CEOã€æŠ€æœ¯æ€»ç›‘ã€äº§å“æ€»ç›‘ã€é«˜çº§ç®¡ç†
- **ç‰¹ç‚¹**: é«˜æŠ€èƒ½è¦æ±‚ã€é«˜è´£ä»»ã€é«˜å½±å“
- **ç¤ºä¾‹**:
  - CEO/æ€»ç»ç†: 2.5-3.0
  - æŠ€æœ¯æ€»ç›‘: 2.0-2.5
  - äº§å“æ€»ç›‘: 1.8-2.2

#### 4.2.2 ä¸­é«˜ä»·å€¼å²—ä½ (1.4-1.7)
- **é€‚ç”¨å²—ä½**: æŠ€æœ¯éª¨å¹²ã€ä¸­çº§ç®¡ç†ã€ä¸šåŠ¡ä¸“å®¶
- **ç‰¹ç‚¹**: ä¸“ä¸šæŠ€èƒ½ã€ç®¡ç†è´£ä»»ã€ä¸šåŠ¡å½±å“
- **ç¤ºä¾‹**:
  - é«˜çº§äº§å“ç»ç†: 1.6-1.7
  - é«˜çº§å®æ–½é¡¾é—®: 1.5-1.6
  - éƒ¨é—¨ç»ç†: 1.4-1.6

#### 4.2.3 æ ‡å‡†ä»·å€¼å²—ä½ (1.0-1.3)
- **é€‚ç”¨å²—ä½**: æ™®é€šæŠ€æœ¯ã€åˆçº§ç®¡ç†ã€ä¸šåŠ¡ä¸“å‘˜
- **ç‰¹ç‚¹**: æ ‡å‡†æŠ€èƒ½ã€åŸºç¡€è´£ä»»ã€å¸¸è§„ä¸šåŠ¡
- **ç¤ºä¾‹**:
  - äº§å“ç»ç†: 1.2-1.3
  - å®æ–½é¡¾é—®: 1.1-1.2
  - é¡¹ç›®ç»ç†: 1.0-1.2

#### 4.2.4 åŸºç¡€ä»·å€¼å²—ä½ (0.1-0.9)
- **é€‚ç”¨å²—ä½**: åŠ©ç†å²—ä½ã€å®ä¹ ç”Ÿã€åŸºç¡€æ”¯æŒ
- **ç‰¹ç‚¹**: åŸºç¡€æŠ€èƒ½ã€è¾…åŠ©è´£ä»»ã€æ”¯æŒæ€§å·¥ä½œ
- **ç¤ºä¾‹**:
  - äº§å“ä¸“å‘˜: 0.8-0.9
  - åˆçº§å®æ–½é¡¾é—®: 0.7-0.8
  - æŠ€æœ¯æ”¯æŒä¸“å‘˜: 0.6-0.7

### 4.3 è¡Œä¸šå‚è€ƒæ ‡å‡†

#### 4.3.1 æŠ€æœ¯å²—ä½
- ç®—æ³•ä¸“å®¶: 2.0-2.5
- æ¶æ„å¸ˆ: 1.8-2.2
- é«˜çº§å·¥ç¨‹å¸ˆ: 1.4-1.8
- æ™®é€šå·¥ç¨‹å¸ˆ: 1.0-1.4
- åˆçº§å·¥ç¨‹å¸ˆ: 0.7-1.0

#### 4.3.2 ç®¡ç†å²—ä½
- CEO/æ€»ç»ç†: 2.5-3.0
- æ€»ç›‘çº§: 1.8-2.2
- ç»ç†çº§: 1.4-1.8
- ä¸»ç®¡çº§: 1.0-1.4
- ä¸“å‘˜çº§: 0.7-1.0

#### 4.3.3 é”€å”®å²—ä½
- é”€å”®æ€»ç›‘: 1.8-2.2
- å¤§å®¢æˆ·ç»ç†: 1.5-1.8
- é”€å”®ç»ç†: 1.2-1.5
- é”€å”®ä»£è¡¨: 0.9-1.2

### 4.4 åŸºå‡†å€¼è°ƒæ•´åŸåˆ™

#### 4.4.1 è°ƒæ•´è§¦å‘æ¡ä»¶
- å²—ä½èŒè´£å‘ç”Ÿé‡å¤§å˜åŒ–
- å¸‚åœºè¡Œæƒ…å‘ç”Ÿæ˜¾è‘—å˜åŒ–
- å…¬å¸æˆ˜ç•¥é‡ç‚¹è°ƒæ•´
- å²—ä½æ•´ä½“ç»©æ•ˆå¼‚å¸¸

#### 4.4.2 è°ƒæ•´å¹…åº¦é™åˆ¶
- å•æ¬¡è°ƒæ•´: ä¸è¶…è¿‡Â±20%
- å¹´åº¦ç´¯è®¡: ä¸è¶…è¿‡Â±30%
- ç‰¹æ®Šæƒ…å†µå¯ç”³è¯·æ›´å¤§è°ƒæ•´

---

## 5. å¥–é‡‘è®¡ç®—æµç¨‹

### 5.1 æ•´ä½“æµç¨‹å›¾

```mermaid
graph TD
    A[å¼€å§‹è®¡ç®—] --> B[è·å–åŸºç¡€å¥–é‡‘]
    B --> C[è·å–å²—ä½åŸºå‡†å€¼]
    C --> D[è®¡ç®—ä¸‰ç»´å¾—åˆ†]
    D --> E[è®¡ç®—ä¸ªäººç»©æ•ˆç³»æ•°]
    E --> F[åº”ç”¨å„é¡¹ç³»æ•°]
    F --> G[è®¡ç®—åŸºç¡€å¥–é‡‘]
    G --> H[è®¡ç®—é¡¹ç›®å¥–é‡‘]
    H --> I[è®¡ç®—æ€»å¥–é‡‘]
    I --> J[ç»“æœæ ¡éªŒ]
    J --> K[ä¿å­˜è®¡ç®—ç»“æœ]
```

### 5.2 è¯¦ç»†æ­¥éª¤

#### 5.2.1 åŸºç¡€æ•°æ®å‡†å¤‡
```javascript
// 1. è·å–å‘˜å·¥åŸºç¡€ä¿¡æ¯
const employee = {
  id: 'emp001',
  name: 'å¼ ä¸‰',
  positionId: 'pos001',
  departmentId: 'dept001',
  businessLineId: 'bl001',
  cityId: 'city001',
  baseBonus: 10000  // åŸºç¡€å¥–é‡‘
}

// 2. è·å–å²—ä½ä¿¡æ¯
const position = {
  id: 'pos001',
  name: 'é«˜çº§å·¥ç¨‹å¸ˆ',
  benchmarkValue: 1.6  // åŸºå‡†å€¼
}

// 3. è·å–ä¸‰ç»´è¯„åˆ†
const threeDimensionalScores = {
  profitContribution: 85,
  positionValue: 78,
  performance: 90
}
```

#### 5.2.2 ä¸‰ç»´å¾—åˆ†è®¡ç®—
```javascript
// è®¡ç®—ä¸‰ç»´ç»¼åˆå¾—åˆ†
const profitScore = 85; // åˆ©æ¶¦è´¡çŒ®å¾—åˆ†
const positionScore = 78; // å²—ä½ä»·å€¼å¾—åˆ†
const performanceScore = 90; // ç»©æ•ˆè¡¨ç°å¾—åˆ†

// åº”ç”¨æƒé‡è®¡ç®—ç»¼åˆå¾—åˆ†
const weightedScore =
  profitScore * 0.4 +
  positionScore * 0.3 +
  performanceScore * 0.3; // = 85*0.4 + 78*0.3 + 90*0.3 = 84.7

// è½¬æ¢ä¸ºä¸ªäººç»©æ•ˆç³»æ•° (0.5-2.0)
const performanceCoefficient = Math.max(0.5, Math.min(2.0, weightedScore / 100)); // = 0.847
```

#### 5.2.3 ç³»æ•°åº”ç”¨
```javascript
// å„é¡¹ç³»æ•°
const businessLineCoefficient = 1.2; // ä¸šåŠ¡çº¿ç³»æ•°
const cityCoefficient = 1.1; // åŸå¸‚ç³»æ•°
const timeCoefficient = 1.0; // æ—¶é—´ç³»æ•° (å…¨èŒ)

// è®¡ç®—æœ€ç»ˆå¥–é‡‘
const finalBonus =
  employee.baseBonus *
  position.benchmarkValue *
  performanceCoefficient *
  businessLineCoefficient *
  cityCoefficient *
  timeCoefficient;

// ç¤ºä¾‹: 10000 * 1.6 * 0.847 * 1.2 * 1.1 * 1.0 = 17,888å…ƒ
```

#### 5.2.4 é¡¹ç›®å¥–é‡‘è®¡ç®—
```javascript
// é¡¹ç›®å¥–é‡‘è®¡ç®—
const projectBonus = calculateProjectBonus(employee, projects);

// æ±‡æ€»æ€»å¥–é‡‘
const totalBonus = finalBonus + projectBonus;
```

### 5.3 ä¿éšœæœºåˆ¶

#### 5.3.1 æœ€ä½å¥–é‡‘ä¿éšœ
```javascript
const MINIMUM_BONUS_RATIO = 0.5; // æœ€ä½å¥–é‡‘ä¸ºåŸºç¡€å¥–é‡‘çš„50%
const minimumBonus = employee.baseBonus * MINIMUM_BONUS_RATIO;

if (finalBonus < minimumBonus) {
  finalBonus = minimumBonus;
}
```

#### 5.3.2 æœ€é«˜å¥–é‡‘é™åˆ¶
```javascript
const MAXIMUM_BONUS_RATIO = 3.0; // æœ€é«˜å¥–é‡‘ä¸ºåŸºç¡€å¥–é‡‘çš„300%
const maximumBonus = employee.baseBonus * MAXIMUM_BONUS_RATIO;

if (finalBonus > maximumBonus) {
  finalBonus = maximumBonus;
}
```

#### 5.3.3 å†å²å¥–é‡‘å¹³æ»‘
```javascript
// é˜²æ­¢å¥–é‡‘æ³¢åŠ¨è¿‡å¤§
const currentBonus = finalBonus;
const historicalAverageBonus = 15000; // å†å²å¹³å‡å¥–é‡‘
const smoothingFactor = 0.3; // å¹³æ»‘å› å­

const smoothedBonus =
  currentBonus * (1 - smoothingFactor) +
  historicalAverageBonus * smoothingFactor;
```

---

## 6. æ•°æ®åº“è¡¨è®¾è®¡

### 6.1 æ ¸å¿ƒè¡¨ç»“æ„

#### 6.1.1 å¥–é‡‘æ± è¡¨ (bonus_pools)
```sql
CREATE TABLE bonus_pools (
    id INT PRIMARY KEY AUTO_INCREMENT,
    period VARCHAR(20) NOT NULL COMMENT 'å¥–é‡‘è®¡ç®—å‘¨æœŸï¼Œå¦‚2025Q1',
    total_profit DECIMAL(15,2) NOT NULL COMMENT 'æ€»åˆ©æ¶¦',
    pool_ratio DECIMAL(5,2) NOT NULL COMMENT 'å¥–é‡‘æ± æ¯”ä¾‹',
    pool_amount DECIMAL(15,2) NOT NULL COMMENT 'å¥–é‡‘æ± æ€»é‡‘é¢',
    status ENUM('draft', 'active', 'archived') DEFAULT 'draft' COMMENT 'çŠ¶æ€',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_period (period)
) COMMENT='å¥–é‡‘æ± åŸºæœ¬ä¿¡æ¯è¡¨';
```

#### 6.1.2 ä¸‰ç»´è®¡ç®—ç»“æœè¡¨ (three_dimensional_calculation_results)
```sql
CREATE TABLE three_dimensional_calculation_results (
    id INT PRIMARY KEY AUTO_INCREMENT,
    employee_id INT NOT NULL COMMENT 'å‘˜å·¥ID',
    calculation_period VARCHAR(20) NOT NULL COMMENT 'è®¡ç®—å‘¨æœŸ',
    profit_contribution_score DECIMAL(5,4) COMMENT 'åˆ©æ¶¦è´¡çŒ®å¾—åˆ†',
    position_value_score DECIMAL(5,4) COMMENT 'å²—ä½ä»·å€¼å¾—åˆ†',
    performance_score DECIMAL(5,4) COMMENT 'ç»©æ•ˆè¡¨ç°å¾—åˆ†',
    final_score DECIMAL(5,4) COMMENT 'ä¸‰ç»´ç»¼åˆå¾—åˆ†',
    score_rank INT COMMENT 'å¾—åˆ†æ’å',
    percentile_rank DECIMAL(5,2) COMMENT 'ç™¾åˆ†ä½æ’å',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_employee_period (employee_id, calculation_period),
    INDEX idx_period (calculation_period),
    INDEX idx_score_rank (score_rank)
) COMMENT='ä¸‰ç»´å¥–é‡‘è®¡ç®—ç»“æœè¡¨';
```

#### 6.1.3 å¥–é‡‘åˆ†é…ç»“æœè¡¨ (bonus_allocation_results)
```sql
CREATE TABLE bonus_allocation_results (
    id INT PRIMARY KEY AUTO_INCREMENT,
    pool_id INT NOT NULL COMMENT 'å¥–é‡‘æ± ID',
    employee_id INT NOT NULL COMMENT 'å‘˜å·¥ID',
    base_bonus DECIMAL(12,2) NOT NULL COMMENT 'åŸºç¡€å¥–é‡‘',
    position_benchmark_value DECIMAL(3,2) NOT NULL COMMENT 'å²—ä½åŸºå‡†å€¼',
    performance_coefficient DECIMAL(5,4) NOT NULL COMMENT 'ä¸ªäººç»©æ•ˆç³»æ•°',
    business_line_coefficient DECIMAL(3,2) DEFAULT 1.0 COMMENT 'ä¸šåŠ¡çº¿ç³»æ•°',
    city_coefficient DECIMAL(3,2) DEFAULT 1.0 COMMENT 'åŸå¸‚ç³»æ•°',
    time_coefficient DECIMAL(3,2) DEFAULT 1.0 COMMENT 'æ—¶é—´ç³»æ•°',
    base_total DECIMAL(12,2) NOT NULL COMMENT 'åŸºç¡€å¥–é‡‘æ€»é¢',
    project_bonus DECIMAL(12,2) DEFAULT 0 COMMENT 'é¡¹ç›®å¥–é‡‘',
    adjustment_amount DECIMAL(12,2) DEFAULT 0 COMMENT 'è°ƒæ•´é‡‘é¢',
    total_amount DECIMAL(12,2) NOT NULL COMMENT 'æœ€ç»ˆå¥–é‡‘æ€»é¢',
    status ENUM('calculated', 'confirmed', 'paid') DEFAULT 'calculated' COMMENT 'çŠ¶æ€',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_employee_pool (employee_id, pool_id),
    INDEX idx_pool (pool_id),
    INDEX idx_employee (employee_id),
    FOREIGN KEY (pool_id) REFERENCES bonus_pools(id),
    FOREIGN KEY (employee_id) REFERENCES employees(id)
) COMMENT='å¥–é‡‘åˆ†é…ç»“æœè¡¨';
```

#### 6.1.4 é¡¹ç›®å¥–é‡‘åˆ†é…è¡¨ (project_bonus_allocation)
```sql
CREATE TABLE project_bonus_allocation (
    id INT PRIMARY KEY AUTO_INCREMENT,
    project_id INT NOT NULL COMMENT 'é¡¹ç›®ID',
    employee_id INT NOT NULL COMMENT 'å‘˜å·¥ID',
    role_name VARCHAR(100) NOT NULL COMMENT 'é¡¹ç›®è§’è‰²',
    base_weight DECIMAL(3,2) NOT NULL COMMENT 'åŸºç¡€æƒé‡',
    performance_weight DECIMAL(3,2) DEFAULT 1.0 COMMENT 'ç»©æ•ˆæƒé‡',
    contribution_weight DECIMAL(3,2) NOT NULL COMMENT 'è´¡çŒ®æƒé‡',
    participation_ratio DECIMAL(3,2) NOT NULL COMMENT 'å‚ä¸åº¦',
    final_weight DECIMAL(5,4) NOT NULL COMMENT 'æœ€ç»ˆæƒé‡',
    bonus_amount DECIMAL(12,2) NOT NULL COMMENT 'å¥–é‡‘é‡‘é¢',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_employee_project (employee_id, project_id),
    INDEX idx_project (project_id),
    INDEX idx_employee (employee_id),
    FOREIGN KEY (project_id) REFERENCES projects(id),
    FOREIGN KEY (employee_id) REFERENCES employees(id)
) COMMENT='é¡¹ç›®å¥–é‡‘åˆ†é…è¡¨';
```

### 6.2 ç´¢å¼•è®¾è®¡ç­–ç•¥

```sql
-- ä¸»è¦æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_bonus_pools_period ON bonus_pools(period);
CREATE INDEX idx_bonus_pools_status ON bonus_pools(status);

-- è®¡ç®—ç»“æœæŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_3d_results_period ON three_dimensional_calculation_results(calculation_period);
CREATE INDEX idx_3d_results_score ON three_dimensional_calculation_results(final_score);

-- åˆ†é…ç»“æœæŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_bonus_results_pool ON bonus_allocation_results(pool_id);
CREATE INDEX idx_bonus_results_employee ON bonus_allocation_results(employee_id);
CREATE INDEX idx_bonus_results_status ON bonus_allocation_results(status);

-- é¡¹ç›®å¥–é‡‘æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_project_bonus_project ON project_bonus_allocation(project_id);
CREATE INDEX idx_project_bonus_employee ON project_bonus_allocation(employee_id);
```

---

## 7. APIæ¥å£è®¾è®¡

### 7.1 å·²å®ç°çš„å®Œæ•´APIæ¥å£åˆ—è¡¨

#### 7.1.1 ä¸ªäººå¥–é‡‘æ ¸å¿ƒæ¥å£

##### 7.1.1.1 ä¸ªäººå¥–é‡‘æ¦‚è§ˆ
```javascript
// GET /api/personal-bonus/overview
// è·å–ä¸ªäººå¥–é‡‘å®Œæ•´æ¦‚è§ˆä¿¡æ¯
// æ§åˆ¶å™¨: PersonalBonusController.getOverview()
// æœåŠ¡: PersonalBonusService.getPersonalBonusOverview()

Query Parameters:
- period: å¥–é‡‘è®¡ç®—å‘¨æœŸ (å¯é€‰ï¼Œé»˜è®¤å½“å‰å‘¨æœŸ)
- Authorization: Bearer <token>

Response:
{
  "code": 200,
  "message": "è·å–ä¸ªäººå¥–é‡‘æ¦‚è§ˆæˆåŠŸ",
  "data": {
    "user": {
      "id": "user001",
      "username": "zhangsan",
      "realName": "å¼ ä¸‰",
      "email": "zhangsan@company.com"
    },
    "employee": {
      "id": "emp001",
      "employeeNumber": "EMP001",
      "name": "å¼ ä¸‰",
      "departmentId": "dept001",
      "departmentName": "æŠ€æœ¯éƒ¨",
      "positionId": "pos001",
      "positionName": "é«˜çº§å·¥ç¨‹å¸ˆ",
      "level": 3,
      "status": "active",
      "joinDate": "2022-01-15"
    },
    "currentPeriod": "2025-11",
    "bonusData": {
      "regularBonus": {
        "allocationId": "alloc001",
        "period": "2025-11",
        "totalAmount": 17888,
        "profitContribution": 7155,
        "positionValue": 5366,
        "performance": 5366,
        "baseAmount": 10000,
        "finalScore": 84.7,
        "rank": 23,
        "status": "calculated"
      },
      "projectBonus": {
        "totalAmount": 11294,
        "projectCount": 2,
        "allocations": [
          {
            "projectId": "proj001",
            "projectName": "æ ¸å¿ƒç³»ç»Ÿé‡æ„",
            "amount": 11294,
            "role": "æŠ€æœ¯è´Ÿè´£äºº",
            "status": "calculated"
          }
        ]
      },
      "totalBonus": 29182,
      "bonusBreakdown": {
        "profitContribution": 7155,
        "positionValue": 5366,
        "performance": 5366,
        "projectBonus": 11294
      }
    },
    "historicalData": [...],
    "performanceMetrics": {
      "finalScore": 84.7,
      "indicators": [...],
      "selfEvaluation": 85,
      "supervisorEvaluation": 84,
      "peerEvaluation": 86,
      "status": "completed"
    }
  }
}
```

##### 7.1.1.2 ä¸ªäººå¥–é‡‘å†å²
```javascript
// GET /api/personal-bonus/history
// è·å–ä¸ªäººå¥–é‡‘å†å²è®°å½•
// æ§åˆ¶å™¨: PersonalBonusController.getPersonalBonusHistory()
// æœåŠ¡: PersonalBonusService.getPersonalBonusHistory()

Query Parameters:
- startDate: å¼€å§‹æ—¥æœŸ (å¯é€‰)
- endDate: ç»“æŸæ—¥æœŸ (å¯é€‰)
- page: é¡µç  (é»˜è®¤1)
- limit: æ¯é¡µæ¡æ•° (é»˜è®¤10)

Response:
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "history": [
      {
        "_id": "hist001",
        "projectId": "proj001",
        "projectName": "æ ¸å¿ƒç³»ç»Ÿé‡æ„",
        "allocationPeriod": "2025-11",
        "totalAmount": 11294,
        "bonusAmount": 11294,
        "role": "æŠ€æœ¯è´Ÿè´£äºº",
        "status": "calculated",
        "createdAt": "2025-11-01T00:00:00Z"
      }
    ],
    "summary": {
      "totalBonus": 29182,
      "totalAllocations": 3,
      "averageBonus": 9727
    },
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 3,
      "pages": 1
    }
  }
}
```

##### 7.1.1.3 ä¸ªäººç»©æ•ˆè¯¦æƒ…
```javascript
// GET /api/personal-bonus/performance
// è·å–ä¸ªäººç»©æ•ˆè¯¦æƒ…åŠå¯¹å¥–é‡‘çš„å½±å“
// æ§åˆ¶å™¨: PersonalBonusController.getPerformanceDetail()

Query Parameters:
- period: è®¡ç®—å‘¨æœŸ (å¯é€‰ï¼Œé»˜è®¤å½“å‰å‘¨æœŸ)

Response:
{
  "code": 200,
  "message": "è·å–ä¸ªäººç»©æ•ˆè¯¦æƒ…æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentPeriod": "2025-11",
    "performanceMetrics": {
      "finalScore": 84.7,
      "indicators": [...],
      "selfEvaluation": 85,
      "supervisorEvaluation": 84,
      "peerEvaluation": 86,
      "status": "completed"
    },
    "bonusImpact": {
      "performanceContribution": 5366,
      "totalBonus": 29182,
      "performanceRatio": 0.184
    }
  }
}
```

##### 7.1.1.4 ä¸ªäººé¡¹ç›®å‚ä¸æƒ…å†µ
```javascript
// GET /api/personal-bonus/projects
// è·å–ä¸ªäººé¡¹ç›®å‚ä¸æƒ…å†µå’Œé¡¹ç›®å¥–é‡‘è¯¦æƒ…
// æ§åˆ¶å™¨: PersonalBonusController.getProjectParticipation()

Response:
{
  "code": 200,
  "message": "è·å–ä¸ªäººé¡¹ç›®å‚ä¸æƒ…å†µæˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentPeriod": "2025-11",
    "projectBonus": {
      "totalAmount": 11294,
      "projectCount": 2,
      "allocations": [
        {
          "projectId": "proj001",
          "projectName": "æ ¸å¿ƒç³»ç»Ÿé‡æ„",
          "amount": 11294,
          "role": "æŠ€æœ¯è´Ÿè´£äºº",
          "status": "calculated"
        }
      ]
    },
    "summary": {
      "totalProjectBonus": 11294,
      "activeProjects": 2,
      "averageBonusPerProject": 5647,
      "projectContributionRatio": 0.387
    }
  }
}
```

##### 7.1.1.5 ä¸ªäººä¸‰ç»´è¯„ä»·è¯¦æƒ…
```javascript
// GET /api/personal-bonus/three-dimensional
// è·å–ä¸ªäººä¸‰ç»´è¯„ä»·å®Œæ•´è¯¦æƒ…
// æ§åˆ¶å™¨: PersonalBonusController.getThreeDimensionalDetail()
// æœåŠ¡: PersonalBonusService.getThreeDimensionalScore()

Response:
{
  "code": 200,
  "message": "è·å–ä¸ªäººä¸‰ç»´è¯„ä»·è¯¦æƒ…æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentPeriod": "2025-11",
    "threeDimensionalScore": {
      "profitContribution": 85,
      "positionValue": 78,
      "performance": 90,
      "finalScore": 84.7,
      "calculationDate": "2025-11-01T00:00:00Z"
    },
    "bonusBreakdown": {
      "profitContribution": 7155,
      "positionValue": 5366,
      "performance": 5366,
      "projectBonus": 11294
    },
    "totalBonus": 29182,
    "scoreAnalysis": {
      "profitContributionLevel": "good",
      "positionValueLevel": "average",
      "performanceLevel": "excellent",
      "overallLevel": "good"
    }
  }
}
```

##### 7.1.1.6 å¥–é‡‘è¶‹åŠ¿åˆ†æ
```javascript
// GET /api/personal-bonus/trend
// è·å–å¥–é‡‘è¶‹åŠ¿åˆ†æ
// æ§åˆ¶å™¨: PersonalBonusController.getBonusTrend()

Query Parameters:
- periods: åˆ†ææœŸé—´æ•° (é»˜è®¤12)

Response:
{
  "code": 200,
  "message": "è·å–å¥–é‡‘è¶‹åŠ¿åˆ†ææˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "summary": {
      "totalBonus": 175092,
      "totalAllocations": 12,
      "averageBonus": 14591,
      "bestMonth": { "period": "2025-09", "amount": 29182 },
      "worstMonth": { "period": "2025-03", "amount": 8500 },
      "totalPeriods": 12
    },
    "trendAnalysis": {
      "trend": "rising",
      "growthRate": 0.235,
      "volatility": 5234,
      "recentAverage": 18950,
      "olderAverage": 15342,
      "totalPeriods": 12,
      "message": "å¥–é‡‘å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œå¢é•¿ç‡ä¸º 23.5%"
    },
    "chartData": {
      "periods": ["2025-03", "2025-04", ..., "2025-11"],
      "totalAmounts": [8500, 12300, ..., 29182],
      "regularBonuses": [...],
      "projectBonuses": [...]
    }
  }
}
```

##### 7.1.1.7 åŒçº§åˆ«å‘˜å·¥å¥–é‡‘å¯¹æ¯”ï¼ˆåŒ¿ååŒ–ï¼‰
```javascript
// GET /api/personal-bonus/peer-comparison
// è·å–ä¸åŒçº§åˆ«å‘˜å·¥çš„å¥–é‡‘å¯¹æ¯”
// æ§åˆ¶å™¨: PersonalBonusController.getPeerComparison()

Response:
{
  "code": 200,
  "message": "è·å–åŒçº§åˆ«å¥–é‡‘å¯¹æ¯”æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentPeriod": "2025-11",
    "myBonus": 29182,
    "comparison": {
      "totalPeers": 15,
      "averageBonus": 26500,
      "medianBonus": 27800,
      "percentile": 77,
      "topQuartile": 31200,
      "bottomQuartile": 22500,
      "myRanking": "average",
      "myPercentile": 77,
      "comparedToAverage": 2682,
      "comparedToMedian": 1382,
      "message": "æ‚¨çš„å¥–é‡‘æ°´å¹³åœ¨åŒçº§åˆ«å‘˜å·¥ä¸­æ’åœ¨ç¬¬77ç™¾åˆ†ä½ï¼Œå¤„äºä¸­ç­‰åä¸Šæ°´å¹³"
    }
  }
}
```

##### 7.1.1.8 ä¸ªäººæ”¹è¿›å»ºè®®
```javascript
// GET /api/personal-bonus/improvement-suggestions
// è·å–åŸºäºç»©æ•ˆçš„å¥–é‡‘æå‡å»ºè®®
// æ§åˆ¶å™¨: PersonalBonusController.getImprovementSuggestions()
// æœåŠ¡: PersonalBonusService.getImprovementSuggestions()

Response:
{
  "code": 200,
  "message": "è·å–ä¸ªäººæ”¹è¿›å»ºè®®æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentBonusAmount": 29182,
    "currentPeriod": "2025-11",
    "suggestions": [
      {
        "category": "performance",
        "title": "æå‡ä¸ªäººç»©æ•ˆè¯„åˆ†",
        "priority": "high",
        "impact": "high",
        "description": "å½“å‰ç»©æ•ˆè¯„åˆ†åä½ï¼Œæå‡ç»©æ•ˆå¯ä»¥ç›´æ¥å¢åŠ å¥–é‡‘æ”¶å…¥",
        "actions": [
          "ä¸ç›´å±ä¸Šçº§è®¨è®ºç»©æ•ˆæ”¹è¿›è®¡åˆ’",
          "å‚åŠ ç›¸å…³æŠ€èƒ½åŸ¹è®­è¯¾ç¨‹",
          "ä¸»åŠ¨æ‰¿æ‹…æ›´å¤šå·¥ä½œèŒè´£",
          "æ”¹å–„å·¥ä½œè´¨é‡å’Œæ•ˆç‡"
        ],
        "potentialIncrease": 3650
      },
      {
        "category": "projects",
        "title": "å¢åŠ é¡¹ç›®å‚ä¸åº¦",
        "priority": "medium",
        "impact": "medium",
        "description": "å‚ä¸æ›´å¤šé¡¹ç›®å¯ä»¥è·å¾—é¢å¤–çš„é¡¹ç›®å¥–é‡‘",
        "actions": [
          "ä¸»åŠ¨ç”³è¯·å‚ä¸æ–°é¡¹ç›®",
          "æå‡é¡¹ç›®ç›¸å…³æŠ€èƒ½",
          "åœ¨å½“å‰é¡¹ç›®ä¸­æ‰¿æ‹…æ›´é‡è¦è§’è‰²",
          "è·¨éƒ¨é—¨é¡¹ç›®åˆä½œ"
        ],
        "potentialIncrease": 5000
      }
    ],
    "performanceInsights": {
      "currentPerformance": { ... },
      "threeDimensionalScore": { ... },
      "projectParticipation": { ... },
      "bonusTrend": { ... }
    }
  }
}
```

#### 7.1.2 å¥–é‡‘æ¨¡æ‹Ÿåˆ†ææ¥å£

##### 7.1.2.1 å¥–é‡‘æ¨¡æ‹Ÿåˆ†æï¼ˆGETï¼‰
```javascript
// GET /api/personal-bonus/simulation
// è·å–å¥–é‡‘æ¨¡æ‹Ÿåˆ†æ
// æ§åˆ¶å™¨: PersonalBonusController.getSimulation()
// æœåŠ¡: PersonalBonusService.getBonusSimulation()

Query Parameters:
- scenarios: æ¨¡æ‹Ÿåœºæ™¯ (JSONæ ¼å¼ï¼Œå¯é€‰)

Response:
{
  "code": 200,
  "message": "è·å–å¥–é‡‘æ¨¡æ‹Ÿåˆ†ææˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "currentBonusAmount": 29182,
    "simulations": [
      {
        "scenario": "current",
        "name": "å½“å‰è¡¨ç°ä¿æŒ",
        "description": "åŸºäºå½“å‰ç»©æ•ˆæ°´å¹³çš„å¥–é‡‘é¢„æµ‹",
        "bonusAmount": 29182,
        "breakdown": { ... },
        "changes": { "performance": 0, "positionValue": 0, "profitContribution": 0 }
      },
      {
        "scenario": "improved_10",
        "name": "ç»©æ•ˆæå‡10%",
        "description": "å¦‚æœä¸ªäººç»©æ•ˆè¯„åˆ†æå‡10%çš„å¥–é‡‘é¢„æµ‹",
        "bonusAmount": 32100,
        "breakdown": { ... },
        "changes": { "performance": 2918, "positionValue": 0, "profitContribution": 0 }
      }
    ],
    "recommendations": [...]
  }
}
```

##### 7.1.2.2 å¥–é‡‘æ¨¡æ‹Ÿåˆ†æï¼ˆPOSTï¼‰
```javascript
// POST /api/personal-bonus/simulation
// é€šè¿‡POSTæ–¹æ³•æäº¤å¤æ‚çš„æ¨¡æ‹Ÿåœºæ™¯
// æ§åˆ¶å™¨: PersonalBonusController.postSimulation()

Request Body:
{
  "scenarios": {
    "promotionPositionId": "pos002",
    "additionalProjects": [
      {
        "projectId": "proj002",
        "role": "é¡¹ç›®ç»ç†",
        "estimatedBudget": 500000
      }
    ]
  }
}
```

#### 7.1.3 å›¢é˜Ÿç®¡ç†æ¥å£

##### 7.1.3.1 å›¢é˜Ÿå¥–é‡‘æ¦‚è§ˆ
```javascript
// GET /api/bonus/team-overview
// è·å–å›¢é˜Ÿå¥–é‡‘æ¦‚è§ˆï¼ˆéƒ¨é—¨ç»ç†åŠä»¥ä¸Šæƒé™ï¼‰
// æ§åˆ¶å™¨: PersonalBonusController.getTeamBonusOverview()

Query Parameters:
- period: è®¡ç®—å‘¨æœŸ (å¯é€‰ï¼Œé»˜è®¤å½“å‰å‘¨æœŸ)
- departmentId: éƒ¨é—¨ID (å¯é€‰ï¼Œé»˜è®¤å½“å‰ç”¨æˆ·éƒ¨é—¨)

Response:
{
  "code": 200,
  "message": "è·å–å›¢é˜Ÿå¥–é‡‘æ¦‚è§ˆæˆåŠŸ",
  "data": {
    "user": { ... },
    "manager": { ... },
    "department": {
      "id": "dept001",
      "name": "æŠ€æœ¯éƒ¨",
      "code": "TECH"
    },
    "currentPeriod": "2025-11",
    "teamStats": {
      "totalEmployees": 25,
      "totalBonus": 725500,
      "averageBonus": 29020,
      "maxBonus": 45600,
      "minBonus": 6127,
      "bonusDistribution": {
        "profit": 290200,
        "position": 217650,
        "performance": 217650
      }
    },
    "employeeDetails": [...],
    "summary": {
      "highPerformers": 5,
      "averagePerformers": 15,
      "lowPerformers": 5
    }
  }
}
```

#### 7.1.4 å¥–é‡‘è°ƒæ•´ç®¡ç†æ¥å£

##### 7.1.4.1 ç”³è¯·å¥–é‡‘è°ƒæ•´
```javascript
// POST /api/personal-bonus/adjustment-request
// ç”³è¯·å¥–é‡‘è°ƒæ•´
// æ§åˆ¶å™¨: PersonalBonusController.requestBonusAdjustment()

Request Body:
{
  "allocationId": "alloc001",
  "adjustmentAmount": 5000,
  "reason": "é¡¹ç›®é¢å¤–è´¡çŒ®"
}
```

##### 7.1.4.2 å®¡æ‰¹å¥–é‡‘è°ƒæ•´ç”³è¯·
```javascript
// POST /api/personal-bonus/adjustment-approve/:adjustmentId
// å®¡æ‰¹å¥–é‡‘è°ƒæ•´ç”³è¯·
// æ§åˆ¶å™¨: PersonalBonusController.approveBonusAdjustment()

Request Body:
{
  "approved": true,
  "comments": "åŒæ„è°ƒæ•´"
}
```

##### 7.1.4.3 è·å–å¥–é‡‘è°ƒæ•´ç”³è¯·åˆ—è¡¨
```javascript
// GET /api/personal-bonus/adjustment-requests
// è·å–å¥–é‡‘è°ƒæ•´ç”³è¯·åˆ—è¡¨
// æ§åˆ¶å™¨: PersonalBonusController.getBonusAdjustmentRequests()

Query Parameters:
- status: ç”³è¯·çŠ¶æ€ (pending/approved/rejected)
- page: é¡µç  (é»˜è®¤1)
- limit: æ¯é¡µæ¡æ•° (é»˜è®¤10)
```

#### 7.1.5 å¥–é‡‘æŸ¥è¯¢æ¥å£

##### 7.1.5.1 ä¸ªäººå¥–é‡‘æŸ¥è¯¢ï¼ˆæ”¯æŒå¤æ‚æŸ¥è¯¢ï¼‰
```javascript
// GET /api/bonus/personal-query
// ä¸ªäººå¥–é‡‘æŸ¥è¯¢ï¼ˆæ”¯æŒå¤æ‚æŸ¥è¯¢å‚æ•°ï¼‰
// æ§åˆ¶å™¨: PersonalBonusController.getPersonalBonusQuery()

Query Parameters:
- startDate: å¼€å§‹æ—¥æœŸ
- endDate: ç»“æŸæ—¥æœŸ
- type: å¥–é‡‘ç±»å‹ (regular/project/adjustment)
- page: é¡µç  (é»˜è®¤1)
- limit: æ¯é¡µæ¡æ•° (é»˜è®¤10)

Response:
{
  "code": 200,
  "message": "ä¸ªäººå¥–é‡‘æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "user": { ... },
    "employee": { ... },
    "queryParams": {
      "startDate": "2025-01",
      "endDate": "2025-11",
      "type": "regular"
    },
    "results": [...],
    "statistics": {
      "totalAmount": 175092,
      "totalCount": 12,
      "averageAmount": 14591,
      "typeDistribution": {
        "regular": { "count": 12, "amount": 175092 }
      }
    },
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 12,
      "pages": 2
    }
  }
}
```

### 7.2 åç«¯å®ç°æ¶æ„

#### 7.2.1 æœåŠ¡å±‚æ¶æ„
```javascript
// æœåŠ¡å±‚å®Œæ•´å®ç°
PersonalBonusService (personalBonusService.js)
â”œâ”€ getPersonalBonusOverview()        // ä¸ªäººå¥–é‡‘æ¦‚è§ˆ
â”œâ”€ getPersonalBonusHistory()         // å¥–é‡‘å†å²
â”œâ”€ getPersonalBonusStats()           // å¥–é‡‘ç»Ÿè®¡
â”œâ”€ getBonusSimulation()              // å¥–é‡‘æ¨¡æ‹Ÿ
â”œâ”€ getImprovementSuggestions()       // æ”¹è¿›å»ºè®®
â”œâ”€ calculateBonusData()              // å¥–é‡‘æ•°æ®è®¡ç®—
â”œâ”€ getRegularBonus()                 // è·å–å¸¸è§„å¥–é‡‘
â”œâ”€ getProjectBonus()                 // è·å–é¡¹ç›®å¥–é‡‘
â”œâ”€ getThreeDimensionalScore()        // è·å–ä¸‰ç»´åˆ†æ•°
â”œâ”€ getPerformanceMetrics()           // è·å–ç»©æ•ˆæŒ‡æ ‡
â”œâ”€ getBonusHistory()                 // è·å–å†å²è®°å½•
â”œâ”€ createBonusAdjustmentRequest()    // åˆ›å»ºè°ƒæ•´ç”³è¯·
â”œâ”€ approveBonusAdjustment()          // å®¡æ‰¹è°ƒæ•´
â””â”€ è¾…åŠ©æ–¹æ³•
   â”œâ”€ getEmployeeByUserId()          // ç”¨æˆ·-å‘˜å·¥å…³è”
   â”œâ”€ getCurrentPeriod()             // è·å–å½“å‰æœŸé—´
   â”œâ”€ getDepartmentInfo()            // è·å–éƒ¨é—¨ä¿¡æ¯
   â”œâ”€ getPositionInfo()              // è·å–èŒä½ä¿¡æ¯
   â”œâ”€ getBusinessLineInfo()          // è·å–ä¸šåŠ¡çº¿ä¿¡æ¯
   â”œâ”€ analyzeBonusTrend()            // åˆ†æå¥–é‡‘è¶‹åŠ¿
   â””â”€ generateBonusRecommendations() // ç”Ÿæˆå»ºè®®
```

#### 7.2.2 æ§åˆ¶å™¨å±‚æ¶æ„
```javascript
// æ§åˆ¶å™¨å±‚å®Œæ•´å®ç°
PersonalBonusController (personalBonusController.js)
â”œâ”€ getOverview()                     // å¥–é‡‘æ¦‚è§ˆ
â”œâ”€ getPersonalBonusHistory()         // å¥–é‡‘å†å²
â”œâ”€ getPersonalBonusStats()           // å¥–é‡‘ç»Ÿè®¡
â”œâ”€ getPerformanceDetail()            // ç»©æ•ˆè¯¦æƒ…
â”œâ”€ getProjectParticipation()         // é¡¹ç›®å‚ä¸æƒ…å†µ
â”œâ”€ getThreeDimensionalDetail()       // ä¸‰ç»´è¯„ä»·è¯¦æƒ…
â”œâ”€ getBonusTrend()                   // å¥–é‡‘è¶‹åŠ¿åˆ†æ
â”œâ”€ getPeerComparison()               // åŒçº§åˆ«å¯¹æ¯”
â”œâ”€ getImprovementSuggestions()       // æ”¹è¿›å»ºè®®
â”œâ”€ getSimulation() / postSimulation() // å¥–é‡‘æ¨¡æ‹Ÿ
â”œâ”€ requestBonusAdjustment()          // ç”³è¯·è°ƒæ•´
â”œâ”€ approveBonusAdjustment()          // å®¡æ‰¹è°ƒæ•´
â”œâ”€ getBonusAdjustmentRequests()      // è°ƒæ•´ç”³è¯·åˆ—è¡¨
â”œâ”€ getTeamBonusOverview()            // å›¢é˜Ÿå¥–é‡‘æ¦‚è§ˆ
â””â”€ getPersonalBonusQuery()           // ä¸ªäººå¥–é‡‘æŸ¥è¯¢

ThreeDimensionalController (threeDimensionalController.js)
â”œâ”€ calculateThreeDimensionalScores() // è®¡ç®—ä¸‰ç»´åˆ†æ•°
â”œâ”€ getThreeDimensionalResults()      // æŸ¥è¯¢ä¸‰ç»´ç»“æœ
â”œâ”€ batchCalculate()                  // æ‰¹é‡è®¡ç®—
â””â”€ exportResults()                   // å¯¼å‡ºç»“æœ
```

#### 7.2.3 æ•°æ®è®¿é—®å±‚
```javascript
// æ”¯æŒå¤šæ•°æ®åº“ç±»å‹
DB_TYPE = 'mysql' | 'nedb'

æ•°æ®æœåŠ¡å®ä¾‹åˆ‡æ¢:
getDataService() => {
  return DB_TYPE === 'mysql'
    ? databaseService    // MySQLæœåŠ¡
    : nedbService       // NeDBæœåŠ¡
}

// ä¸»è¦æ•°æ®é›†åˆ/è¡¨
mysqlService:
â”œâ”€ bonus_pools                        // å¥–é‡‘æ± è¡¨
â”œâ”€ three_dimensional_calculation_results  // ä¸‰ç»´è®¡ç®—ç»“æœè¡¨
â”œâ”€ bonus_allocation_results           // å¥–é‡‘åˆ†é…ç»“æœè¡¨
â”œâ”€ project_bonus_allocations          // é¡¹ç›®å¥–é‡‘åˆ†é…è¡¨
â”œâ”€ employees                          // å‘˜å·¥è¡¨
â”œâ”€ users                              // ç”¨æˆ·è¡¨
â”œâ”€ departments                        // éƒ¨é—¨è¡¨
â”œâ”€ positions                          // èŒä½è¡¨
â””â”€ projects                           // é¡¹ç›®è¡¨
```

### 7.3 æƒé™æ§åˆ¶

#### 7.3.1 æ¥å£æƒé™è¦æ±‚
```javascript
// æƒé™ä¸­é—´ä»¶
const bonusPermissions = {
  'bonus:calculate': 'è®¡ç®—å¥–é‡‘',
  'bonus:view:self': 'æŸ¥çœ‹ä¸ªäººå¥–é‡‘',
  'bonus:view:department': 'æŸ¥çœ‹éƒ¨é—¨å¥–é‡‘',
  'bonus:view:all': 'æŸ¥çœ‹æ‰€æœ‰å¥–é‡‘',
  'bonus:simulate': 'å¥–é‡‘æ¨¡æ‹Ÿ',
  'bonus:export': 'å¯¼å‡ºå¥–é‡‘æ•°æ®',
  'bonus:adjust': 'è°ƒæ•´å¥–é‡‘',
  'bonus:approve': 'å®¡æ‰¹å¥–é‡‘è°ƒæ•´',
  'bonus:manage:team': 'ç®¡ç†å›¢é˜Ÿå¥–é‡‘'
};
```

#### 7.3.2 æ•°æ®è®¿é—®æ§åˆ¶
```javascript
// ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„å¥–é‡‘
// éƒ¨é—¨ç»ç†å¯ä»¥æŸ¥çœ‹æœ¬éƒ¨é—¨å¥–é‡‘
// é«˜ç®¡å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¥–é‡‘
const getDataAccessScope = (user) => {
  if (user.permissions.includes('bonus:view:all')) {
    return { scope: 'all', filter: {} };
  } else if (user.permissions.includes('bonus:view:department')) {
    return { scope: 'department', filter: { departmentId: user.departmentId } };
  } else {
    return { scope: 'self', filter: { employeeId: user.id } };
  }
};
```

#### 7.3.3 æƒé™æ£€æŸ¥å®ç°
```javascript
// æ§åˆ¶å™¨ä¸­çš„æƒé™æ£€æŸ¥ç¤ºä¾‹
if (employeeId && employeeId !== user.employeeId) {
  if (!PermissionValidator.canAccessResource(user, 'employee', 'view')) {
    return res.status(403).json({
      code: 403,
      message: 'æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹å…¶ä»–å‘˜å·¥çš„å¥–é‡‘ä¿¡æ¯',
      data: null
    });
  }
}
```

### 7.4 APIæ¥å£ç‰¹æ€§

#### 7.4.1 åˆ†é¡µæ”¯æŒ
- æ‰€æœ‰åˆ—è¡¨æŸ¥è¯¢æ¥å£å‡æ”¯æŒåˆ†é¡µ
- å‚æ•°ï¼š`page` (é¡µç , é»˜è®¤1)ã€`limit` (æ¯é¡µæ¡æ•°, é»˜è®¤10/20)
- è¿”å›ï¼š`pagination` å¯¹è±¡åŒ…å«åˆ†é¡µä¿¡æ¯

#### 7.4.2 æ•°æ®è¿‡æ»¤
- æ”¯æŒæŒ‰æœŸé—´è¿‡æ»¤ï¼š`period`ã€`startDate`ã€`endDate`
- æ”¯æŒæŒ‰éƒ¨é—¨è¿‡æ»¤ï¼š`departmentId`
- æ”¯æŒæŒ‰ä¸šåŠ¡çº¿è¿‡æ»¤ï¼š`businessLineId`
- æ”¯æŒæŒ‰çŠ¶æ€è¿‡æ»¤ï¼š`status`

#### 7.4.3 æ•°æ®æ’åº
- å†å²è®°å½•æŒ‰æœŸé—´é™åºæ’åº
- æ’åæŸ¥è¯¢æŒ‰å¥–é‡‘é™åºæ’åº
- æ”¯æŒè‡ªå®šä¹‰æ’åºå­—æ®µ

#### 7.4.4 é”™è¯¯å¤„ç†
- ç»Ÿä¸€é”™è¯¯ç ä½“ç³»
- è¯¦ç»†é”™è¯¯ä¿¡æ¯
- æƒé™ä¸è¶³è¿”å›403
- æ•°æ®ä¸å­˜åœ¨è¿”å›404
- å‚æ•°é”™è¯¯è¿”å›400
- æœåŠ¡å™¨é”™è¯¯è¿”å›500

#### 7.4.5 å®¡è®¡æ—¥å¿—
```javascript
// æ‰€æœ‰æ•æ„Ÿæ“ä½œå‡è®°å½•å®¡è®¡æ—¥å¿—
await auditService.logPermissionAction(
  user,
  'bonus:view',
  'bonus',
  targetEmployeeId,
  {
    action: 'view_personal_bonus',
    employeeId: targetEmployeeId
  },
  {
    ipAddress: req.ip,
    userAgent: req.get('User-Agent'),
    requestId: req.id
  }
);
```

---

## 8. å®é™…è®¡ç®—ç¤ºä¾‹

### 8.1 ç¤ºä¾‹1ï¼šé«˜çº§å·¥ç¨‹å¸ˆå¼ ä¸‰

#### 8.1.1 åŸºç¡€ä¿¡æ¯
```javascript
const employee = {
  id: 'EMP001',
  name: 'å¼ ä¸‰',
  position: 'é«˜çº§å·¥ç¨‹å¸ˆ',
  department: 'æŠ€æœ¯éƒ¨',
  businessLine: 'äº§å“ç ”å‘',
  city: 'åŒ—äº¬',
  baseBonus: 10000,  // åŸºç¡€å¥–é‡‘
  benchmarkValue: 1.6  // å²—ä½åŸºå‡†å€¼
};
```

#### 8.1.2 ä¸‰ç»´è¯„åˆ†è¯¦æƒ…
```javascript
const threeDimensionalScores = {
  // åˆ©æ¶¦è´¡çŒ®ç»´åº¦ (40%)
  profitContribution: {
    total: 85,
    directContribution: 88,      // ç›´æ¥è´¡çŒ®
    workloadContribution: 82,    // å·¥ä½œé‡è´¡çŒ®
    qualityContribution: 85,     // è´¨é‡è´¡çŒ®
    positionValueContribution: 86  // å²—ä½ä»·å€¼è´¡çŒ®
  },

  // å²—ä½ä»·å€¼ç»´åº¦ (30%)
  positionValue: {
    total: 78,
    skillComplexity: 80,
    responsibilityWeight: 75,
    decisionImpact: 78,
    experienceRequirement: 82,
    marketValue: 76
  },

  // ç»©æ•ˆè¡¨ç°ç»´åº¦ (30%)
  performance: {
    total: 90,
    workOutput: 92,
    workQuality: 88,
    workEfficiency: 90,
    teamwork: 89,
    innovation: 85,
    leadership: 87,
    learningGrowth: 91
  }
};
```

#### 8.1.3 ç³»æ•°ä¿¡æ¯
```javascript
const coefficients = {
  businessLine: 1.2,  // äº§å“ç ”å‘ä¸šåŠ¡çº¿ç³»æ•°
  city: 1.1,          // åŒ—äº¬åŸå¸‚ç³»æ•°
  time: 1.0           // å…¨èŒæ—¶é—´ç³»æ•°
};
```

#### 8.1.4 è®¡ç®—è¿‡ç¨‹
```javascript
// 1. è®¡ç®—ä¸‰ç»´ç»¼åˆå¾—åˆ†
const profitScore = 85 * 0.4;        // 34.0
const positionScore = 78 * 0.3;      // 23.4
const performanceScore = 90 * 0.3;   // 27.0
const finalScore = profitScore + positionScore + performanceScore;  // 84.4

// 2. è½¬æ¢ä¸ºä¸ªäººç»©æ•ˆç³»æ•°
const performanceCoefficient = finalScore / 100;  // 0.844

// 3. è®¡ç®—åŸºç¡€å¥–é‡‘
const baseTotal =
  employee.baseBonus *
  employee.benchmarkValue *
  performanceCoefficient *
  coefficients.businessLine *
  coefficients.city *
  coefficients.time;

// = 10000 * 1.6 * 0.844 * 1.2 * 1.1 * 1.0 = 17,830å…ƒ
```

#### 8.1.5 é¡¹ç›®å¥–é‡‘
```javascript
const projectBonuses = [
  {
    projectName: 'æ ¸å¿ƒç³»ç»Ÿé‡æ„',
    role: 'æŠ€æœ¯è´Ÿè´£äºº',
    roleWeight: 1.2,
    participationRatio: 0.8,
    projectBonusPool: 100000,
    employeeWeight: 1.2 * 0.8 = 0.96,
    totalWeights: 8.5,  // æ‰€æœ‰æˆå‘˜æƒé‡æ€»å’Œ
    bonusAmount: 100000 * (0.96 / 8.5) = 11,294å…ƒ
  }
];

const totalProjectBonus = 11294;
```

#### 8.1.6 æœ€ç»ˆç»“æœ
```javascript
const result = {
  employeeName: 'å¼ ä¸‰',
  baseBonus: 10000,
  positionBenchmarkValue: 1.6,
  performanceCoefficient: 0.844,
  baseTotal: 17830,
  projectBonus: 11294,
  totalBonus: 29124,
  scoreRank: 23,
  percentileRank: 77.0
};
```

### 8.2 ç¤ºä¾‹2ï¼šäº§å“ç»ç†æå››

#### 8.2.1 åŸºç¡€ä¿¡æ¯
```javascript
const employee = {
  id: 'EMP002',
  name: 'æå››',
  position: 'äº§å“ç»ç†',
  department: 'äº§å“éƒ¨',
  businessLine: 'ä¸šåŠ¡äº§å“',
  city: 'ä¸Šæµ·',
  baseBonus: 12000,
  benchmarkValue: 1.3
};
```

#### 8.2.2 ä¸‰ç»´è¯„åˆ†
```javascript
const threeDimensionalScores = {
  profitContribution: 78,
  positionValue: 82,
  performance: 88
};
```

#### 8.2.3 è®¡ç®—ç»“æœ
```javascript
// ä¸‰ç»´ç»¼åˆå¾—åˆ†
const finalScore = 78 * 0.4 + 82 * 0.3 + 88 * 0.3 = 82.0;

// åŸºç¡€å¥–é‡‘
const baseTotal = 12000 * 1.3 * (82.0 / 100) * 1.1 * 1.0 * 1.0 = 14,037å…ƒ;

// é¡¹ç›®å¥–é‡‘
const projectBonus = 8500å…ƒ;

// æ€»å¥–é‡‘
const totalBonus = 14037 + 8500 = 22,537å…ƒ;
```

### 8.3 ç¤ºä¾‹3ï¼šåˆçº§å·¥ç¨‹å¸ˆç‹äº”

#### 8.3.1 åŸºç¡€ä¿¡æ¯
```javascript
const employee = {
  id: 'EMP003',
  name: 'ç‹äº”',
  position: 'åˆçº§å·¥ç¨‹å¸ˆ',
  department: 'æŠ€æœ¯éƒ¨',
  businessLine: 'äº§å“ç ”å‘',
  city: 'æˆéƒ½',
  baseBonus: 6000,
  benchmarkValue: 0.9
};
```

#### 8.3.2 ä¸‰ç»´è¯„åˆ†
```javascript
const threeDimensionalScores = {
  profitContribution: 72,
  positionValue: 65,
  performance: 75
};
```

#### 8.3.3 è®¡ç®—ç»“æœ
```javascript
// ä¸‰ç»´ç»¼åˆå¾—åˆ†
const finalScore = 72 * 0.4 + 65 * 0.3 + 75 * 0.3 = 70.8;

// åŸºç¡€å¥–é‡‘
const baseTotal = 6000 * 0.9 * (70.8 / 100) * 1.2 * 0.9 * 1.0 = 4,127å…ƒ;

// é¡¹ç›®å¥–é‡‘
const projectBonus = 2000å…ƒ;

// æ€»å¥–é‡‘
const totalBonus = 4127 + 2000 = 6,127å…ƒ;

// åº”ç”¨æœ€ä½ä¿éšœ (6000 * 0.5 = 3000)
// æœ€ç»ˆå¥–é‡‘ = 6,127å…ƒ (æ— éœ€è°ƒæ•´)
```

---

## 9. å¸¸è§é—®é¢˜è§£ç­”

### Q1: å²—ä½åŸºå‡†å€¼å¦‚ä½•ç¡®å®šï¼Ÿ
**A**: å²—ä½åŸºå‡†å€¼æ ¹æ®ä»¥ä¸‹å› ç´ ç»¼åˆè¯„ä¼°ï¼š
- æŠ€èƒ½å¤æ‚åº¦ï¼šæ‰€éœ€æŠ€èƒ½çš„å¤æ‚ç¨‹åº¦å’Œç¨€ç¼ºæ€§
- è´£ä»»èŒƒå›´ï¼šæ‰¿æ‹…çš„è´£ä»»èŒƒå›´å’Œå†³ç­–å½±å“åŠ›
- å¸‚åœºä»·å€¼ï¼šå²—ä½åœ¨å¤–éƒ¨å¸‚åœºçš„è–ªèµ„æ°´å¹³
- ç»éªŒè¦æ±‚ï¼šå¯¹å·¥ä½œç»éªŒçš„è¦æ±‚æ°´å¹³
- ä¸šåŠ¡å½±å“ï¼šå¯¹å…¬å¸ä¸šåŠ¡çš„è´¡çŒ®å’Œå½±å“

åŸºå‡†å€¼æ¯å¹´è¯„ä¼°ä¸€æ¬¡ï¼Œå¯æ ¹æ®å¸‚åœºå˜åŒ–å’Œå²—ä½è¦æ±‚è°ƒæ•´ã€‚

### Q2: ä¸‰ç»´è¯„åˆ†çš„æ•°æ®æ¥æºæ˜¯ä»€ä¹ˆï¼Ÿ
**A**: ä¸‰ç»´è¯„åˆ†æ•°æ®æ¥æºï¼š
- **åˆ©æ¶¦è´¡çŒ®**: è´¢åŠ¡ç³»ç»Ÿæ•°æ®ã€é¡¹ç›®ç®¡ç†ç³»ç»Ÿæ•°æ®ã€å·¥ä½œé‡ç»Ÿè®¡ç³»ç»Ÿ
- **å²—ä½ä»·å€¼**: å²—ä½è¯´æ˜ä¹¦ã€å¸‚åœºè°ƒç ”æ•°æ®ã€å†…éƒ¨è¯„ä¼°
- **ç»©æ•ˆè¡¨ç°**: ç»©æ•ˆè€ƒæ ¸ç³»ç»Ÿã€åŒäº‹è¯„ä»·ã€å®¢æˆ·åé¦ˆã€è‡ªæˆ‘è¯„ä¼°

### Q3: å¦‚ä½•ä¿è¯å¥–é‡‘åˆ†é…çš„å…¬å¹³æ€§ï¼Ÿ
**A**: ç³»ç»Ÿé‡‡ç”¨å¤šé‡ä¿éšœæœºåˆ¶ï¼š
- åŸºäºé‡åŒ–æ•°æ®çš„ä¸‰ç»´è¯„åˆ†æ¨¡å‹ï¼Œå‡å°‘ä¸»è§‚åˆ¤æ–­
- ç™¾åˆ†ä½æ’åç³»ç»Ÿï¼Œç¡®ä¿ç›¸å¯¹å…¬å¹³
- æœ€ä½å¥–é‡‘ä¿éšœï¼Œç¡®ä¿åŸºæœ¬æ¿€åŠ±
- å†å²å¥–é‡‘å¹³æ»‘ï¼Œé¿å…æ³¢åŠ¨è¿‡å¤§
- å…¬å¼€é€æ˜çš„è¯„åˆ†æ ‡å‡†å’Œè®¡ç®—è¿‡ç¨‹
- ç”³è¯‰å’Œè°ƒæ•´æœºåˆ¶

### Q4: é¡¹ç›®å¥–é‡‘å¦‚ä½•è®¡ç®—ï¼Ÿ
**A**: é¡¹ç›®å¥–é‡‘è®¡ç®—è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š
- é¡¹ç›®å¥–é‡‘æ± è§„æ¨¡ï¼ˆåŸºäºé¡¹ç›®é¢„ç®—å’Œé‡è¦æ€§ï¼‰
- ä¸ªäººåœ¨é¡¹ç›®ä¸­çš„è§’è‰²æƒé‡
- å®é™…å‚ä¸åº¦å’Œè´¡çŒ®åº¦
- é¡¹ç›®å®Œæˆè´¨é‡å’Œæˆæœ

è®¡ç®—å…¬å¼ï¼šä¸ªäººé¡¹ç›®å¥–é‡‘ = é¡¹ç›®å¥–é‡‘æ±  Ã— (ä¸ªäººæƒé‡ Ã— å‚ä¸åº¦) Ã· Î£(æ‰€æœ‰æˆå‘˜æƒé‡ Ã— å‚ä¸åº¦)

### Q5: å¥–é‡‘è®¡ç®—å‘¨æœŸæ˜¯å¤šä¹…ï¼Ÿ
**A**: ç³»ç»Ÿæ”¯æŒå¤šç§è®¡ç®—å‘¨æœŸï¼š
- æœˆåº¦å¥–é‡‘ï¼šæ¯æœˆè®¡ç®—ï¼Œä¸»è¦é’ˆå¯¹çŸ­æœŸé¡¹ç›®
- å­£åº¦å¥–é‡‘ï¼ˆæ¨èï¼‰ï¼šæ¯å­£åº¦è®¡ç®—ï¼Œå¹³è¡¡çŸ­æœŸå’Œé•¿æœŸ
- å¹´åº¦å¥–é‡‘ï¼šæ¯å¹´è®¡ç®—ï¼Œé’ˆå¯¹æ•´ä½“ç»©æ•ˆ

æ¨èä½¿ç”¨å­£åº¦ä½œä¸ºä¸»è¦è®¡ç®—å‘¨æœŸã€‚

### Q6: å¦‚æœå¯¹å¥–é‡‘è®¡ç®—ç»“æœæœ‰å¼‚è®®æ€ä¹ˆåŠï¼Ÿ
**A**: å‘˜å·¥å¯ä»¥é€šè¿‡ä»¥ä¸‹æ¸ é“ç”³è¯‰ï¼š
- ç³»ç»Ÿåœ¨çº¿ç”³è¯‰åŠŸèƒ½ï¼Œæäº¤å¼‚è®®ç”³è¯·
- è”ç³»ç›´å±ä¸»ç®¡æˆ–HRéƒ¨é—¨
- æä¾›è¡¥å……ææ–™å’Œæ•°æ®æ”¯æŒ
- HRéƒ¨é—¨ç»„ç»‡å¤è®®å’Œè°ƒæ•´

ç”³è¯‰å‘¨æœŸé€šå¸¸ä¸º5ä¸ªå·¥ä½œæ—¥ã€‚

### Q7: å²—ä½è°ƒæ•´ååŸºå‡†å€¼ä½•æ—¶ç”Ÿæ•ˆï¼Ÿ
**A**: å²—ä½è°ƒæ•´åçš„åŸºå‡†å€¼ç”Ÿæ•ˆæ—¶é—´ï¼š
- æ™‹å‡/è°ƒå²—ï¼šæ¬¡æœˆ1æ—¥ç”Ÿæ•ˆ
- ç‰¹æ®Šå²—ä½è°ƒæ•´ï¼šå¯ç”³è¯·ç«‹å³ç”Ÿæ•ˆ
- åŸºå‡†å€¼è°ƒæ•´ï¼šéœ€ç»è¿‡HRå®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åç”Ÿæ•ˆ

### Q8: å¦‚ä½•æé«˜ä¸ªäººå¥–é‡‘ï¼Ÿ
**A**: æå‡å¥–é‡‘çš„ç­–ç•¥ï¼š
- **çŸ­æœŸæå‡**: æé«˜å·¥ä½œæ•ˆç‡å’Œå·¥ä½œè´¨é‡ï¼Œå¢å¼ºå›¢é˜Ÿåä½œ
- **ä¸­æœŸå‘å±•**: æˆä¸ºæŸä¸ªé¢†åŸŸä¸“å®¶ï¼Œæ‰©å¤§ä¸šåŠ¡å½±å“åŠ›
- **é•¿æœŸè§„åˆ’**: èŒä½æ™‹å‡ï¼Œæ„å»ºæ ¸å¿ƒç«äº‰åŠ›ï¼Œå‚ä¸é‡è¦é¡¹ç›®

è¯¦ç»†æ”»ç•¥è¯·å‚è€ƒã€Šå¥–é‡‘æå‡æ”»ç•¥ã€‹æ–‡æ¡£ã€‚

### Q9: ä¸šåŠ¡çº¿ç³»æ•°å’ŒåŸå¸‚ç³»æ•°å¦‚ä½•è®¾å®šï¼Ÿ
**A**: ç³»æ•°è®¾å®šåŸåˆ™ï¼š
- **ä¸šåŠ¡çº¿ç³»æ•°**: æ ¹æ®ä¸šåŠ¡çº¿çš„ç›ˆåˆ©èƒ½åŠ›ã€æˆ˜ç•¥é‡è¦æ€§ã€å¸‚åœºç«äº‰åº¦è®¾å®šï¼ŒèŒƒå›´0.8-1.5
- **åŸå¸‚ç³»æ•°**: æ ¹æ®åŸå¸‚ç”Ÿæ´»æˆæœ¬ã€è–ªèµ„æ°´å¹³ã€å¸‚åœºç«äº‰åº¦è®¾å®šï¼ŒèŒƒå›´0.8-1.3

ç³»æ•°æ¯å¹´è¯„ä¼°è°ƒæ•´ä¸€æ¬¡ã€‚

### Q10: å¥–é‡‘è®¡ç®—çš„æ•°æ®å®‰å…¨å¦‚ä½•ä¿éšœï¼Ÿ
**A**: ç³»ç»Ÿé‡‡ç”¨å¤šé‡å®‰å…¨æªæ–½ï¼š
- ç”¨æˆ·æƒé™æ§åˆ¶ï¼Œæ•°æ®è®¿é—®èŒƒå›´é™åˆ¶
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- æ“ä½œæ—¥å¿—è®°å½•å’Œå®¡è®¡
- æ•°æ®ä¼ è¾“HTTPSåŠ å¯†
- å®šæœŸå®‰å…¨æ£€æŸ¥å’Œæ¼æ´æ‰«æ
- ä¸¥æ ¼çš„æ•°æ®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰æŠ€æœ¯é—®é¢˜æˆ–éœ€è¦è¯¦ç»†è¯´æ˜ï¼Œè¯·è”ç³»ï¼š
- **æŠ€æœ¯æ¶æ„å›¢é˜Ÿ**: tech@company.com
- **äº§å“ç»ç†**: pm@company.com
- **HRéƒ¨é—¨**: hr@company.com

---

*æœ¬æ–‡æ¡£å°†éšç€ç³»ç»ŸåŠŸèƒ½å®Œå–„æŒç»­æ›´æ–°ï¼Œå»ºè®®å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚*

**æœ€åæ›´æ–°æ—¶é—´**: 2025-11-07
**æ–‡æ¡£ç‰ˆæœ¬**: v1.1
**ç»´æŠ¤å›¢é˜Ÿ**: æŠ€æœ¯æ¶æ„å›¢é˜Ÿ & äººåŠ›èµ„æºéƒ¨

---

## ğŸ“ ç‰ˆæœ¬æ›´æ–°è®°å½•

### v1.1 (2025-11-07)
- **é‡å¤§æ›´æ–°**: æ–°å¢å®Œæ•´çš„APIæ¥å£è®¾è®¡æ–‡æ¡£
- æ–°å¢15+ä¸ªå·²å®ç°çš„åç«¯APIæ¥å£è¯¦ç»†è¯´æ˜
- æ–°å¢æœåŠ¡å±‚æ¶æ„è¯´æ˜ (PersonalBonusService)
- æ–°å¢æ§åˆ¶å™¨å±‚æ¶æ„è¯´æ˜ (PersonalBonusController)
- æ–°å¢æ•°æ®è®¿é—®å±‚æ¶æ„è¯´æ˜
- æ–°å¢æƒé™æ§åˆ¶ä½“ç³»è¯´æ˜
- æ–°å¢APIæ¥å£ç‰¹æ€§è¯´æ˜ï¼ˆåˆ†é¡µã€è¿‡æ»¤ã€æ’åºã€é”™è¯¯å¤„ç†ã€å®¡è®¡æ—¥å¿—ï¼‰
- æ›´æ–°APIæ¥å£å“åº”ç¤ºä¾‹ï¼ŒåŒ…å«å®Œæ•´çš„è¿”å›æ•°æ®ç»“æ„

### v1.0 (2025-11-07)
- åˆå§‹ç‰ˆæœ¬
- å®Œæˆä¸‰ç»´å¥–é‡‘è®¡ç®—æ¨¡å‹è®¾è®¡
- å®Œæˆé¡¹ç›®å¥–é‡‘åˆ†é…æœºåˆ¶è®¾è®¡
- å®Œæˆå²—ä½åŸºå‡†å€¼ä½“ç³»è®¾è®¡
- å®Œæˆæ•°æ®åº“è¡¨è®¾è®¡
- å®Œæˆå®é™…è®¡ç®—ç¤ºä¾‹
- å®Œæˆå¸¸è§é—®é¢˜è§£ç­”
